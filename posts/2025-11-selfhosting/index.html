<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Brandon Davis</title><meta name=description content="UNC alum and software engineer. I love experimenting with code, discovering new places, and reading about space exploration"><meta property="og:title" content="Brandon Davis"><meta property="og:site_name" content="subdavis.com"><meta property="og:description" content="UNC alum and software engineer. I love experimenting with code, discovering new places, and reading about space exploration"><meta property="og:image" content="https://subdavis.com/img/li.jpg"><meta property="og:url" content="https://subdavis.com/"><meta name=twitter:card content="summary"><meta name=twitter:site content="@subdavis"><meta name=twitter:creator content="@subdavis"><meta name=twitter:title content="Brandon Davis"><meta name=twitter:description content="UNC alum and software engineer. I love experimenting with code, discovering new places, and reading about space exploration"><meta name=twitter:image content="https://subdavis.com/img/li.jpg"><meta name=twitter:url content="https://subdavis.com/"><link rel=icon type=image/x-icon href=/favicon.ico>
    
  
  
    
      
        <link rel="stylesheet" href="/css/main.794ca74ca4e4b67e8258332de2004f53e06078cfda93d6eceb25a1ab5d6c79d8.css" integrity="sha256-eUynTKTktn6CWDMt4gBPU&#43;BgeM/ak9bs6yWhq11sedg=" crossorigin="anonymous">
      
    
  

  
<script defer data-website-id=bfadb547-f5e5-4a8e-9416-13340a2bfdfd src=https://umami.subdavis.com/script.js></script></head><body class=bg-white><div class="main w-full bg-white"><div class="max-w-screen-md mx-auto px-8 pb-4 xl:px-12"><div class="my-4 max-w-3xl"><nav aria-label=Breadcrumb class=mb-6><ol class="flex flex-wrap items-center space-x-2 text-sm text-accent-600 font-mono"><li class="flex items-center space-x-2 text-nowrap"><a href=/ class="text-accent-700 hover:text-accent-700 transition-colors">Brandon Davis
</a><span class=text-accent-600>/</span></li><li class="flex items-center space-x-2 text-nowrap"><a href=/posts/ class="text-accent-700 hover:text-accent-700 transition-colors">Posts
</a><span class=text-accent-600>/</span></li><li class="flex items-center space-x-2"><span class=text-black>Self-hosting Sustainably</span></li></ol></nav><article class="prose max-w-none"><header class=mb-8><h1 class="text-4xl font-bold text-black mb-2">Self-hosting Sustainably</h1><div class="text-accent-600 text-sm mb-4">November 16, 2025</div><p class="text-xl text-black italic">With docker compose and not much else.</p></header><div class="text-black leading-6"><p>At some point, every home server operator loses steam. After 6+ years running ~20 applications on a home server, I wish only for things to work properly and not waste my time.</p><p>If you&rsquo;re anything like me, <strong>docker compose is probably all you need.</strong></p><p><a href=https://github.com/subdavis/selfhosted>Here is my full configuration</a></p><h2 id=my-needs>My needs</h2><p>Any conversation about the &ldquo;right&rdquo; setup should be grounded in goals. These are mine.</p><ul><li>A bunch of network-reachable applications</li><li>Some reachable over public internet</li><li>Some behind SSO, IP Whitelist, or both</li><li>Running as <code>&lt;app>.subdavis.com</code></li><li>Plus DNS filtering via AdGuardHome</li></ul><p>I no longer value arcane wisdom earned through <a href=https://immich.app/cursed-knowledge>suffering</a>.</p><h2 id=10-year-old-hardware>10 year old hardware</h2><ul><li>An old 2010s Dell Optiplex Core i3, 8GB RAM</li><li>Rehoused in a Fractal Design Node 304 Mini-ITX</li><li>With a 4TB media HDD</li><li>And a 2-Drive 2TB RAID-1 MDADM array for more important data</li><li>And another 1TB HDD for backups</li></ul><h2 id=everything-is-computer-docker-compose>Everything is <del>computer</del> docker compose</h2><p>My basic philosophy is that I should be able to get this junk running on new or reimaged hardware in a couple hours if needed. I can <code>apt dist-upgrade</code> worry-free. Docker&rsquo;s restart policy has never betrayed me the way <a href=https://nosystemd.org/>systemd repeatedly has.</a>.</p><h2 id=a-little-bit-of-systemd-though>A little bit of systemd, though</h2><p>systemd starts dockerd, which takes care of bringing up the compose stack on restart or container failure. Docker handles dependency constraints with grace.</p><p>One extra need is for the external disks to be mounted properly before docker even tries to start. fstab can create race conditions, but systemd allows you to set mount dependencies on services, which is quite handy.</p><pre tabindex=0><code class=language-conf data-lang=conf>[Unit]
Description=RAID1

[Mount]
What=/dev/md0
Where=/media/primary
Type=ext4
Options=defaults,auto,noatime,exec

[Install]
WantedBy=docker.service
</code></pre><h2 id=traefik-is-whatever-man>Traefik is whatever, man</h2><p>I use <a href=https://traefik.io/traefik>traefik</a>. I learned it back when I had more energy for such things. I geniunely like its tag-based config because it keeps my <code>docker-compose.yml</code> modular and clean, but traefik config is verbose and annoying to troubleshoot. If I were starting over today I might try <a href=https://caddyserver.com/>caddy</a>.</p><p>Still, the Letsencrypt support and Cloudflare companion have never let me down. Often, my new hostname has registered and is ready to serve traffic before the new app has even booted.</p><h2 id=tired-of-fighting-dns>Tired of fighting DNS</h2><p>Maybe 6-8x per year, AdGuardHome goes down. Last year a slowly failing power supply lead to a lot of random system crashes. On this matter I have moved past depression to acceptance.</p><p>If you, too, feel traumatized by <code>dhcp-option=6</code>, I recommend giving up on your end user device discovery dreams and dealing with DNS at the router instead.</p><p>I run dnsmasq on my Edgerouter, redirect all DNS queries to my adguard instance wit NAT, and have a NAT rule enable/disable switch I can throw to take my AdGuardHome instance out of the critical path of internet access. <a href=https://github.com/subdavis/selfhosted/blob/main/docs/pihole-dnsmasq.md>I wrote about that here.</a></p><p>(The NAT rule is necessary regardless of your config because plenty of IoT devices hard-code their DNS anyway. Looking at you, Philips Hue Bridge)</p><h2 id=wireguard--tailscale->Wireguard? üôÖ Tailscale? üëç</h2><p>Wireguard config has consumed many hours of my life. The final straw was tweaking MTU while dealing with packet loss over mobile networks (T Mobile). I noped out and set up Tailscale.</p><h2 id=no-more-innovation-tokens>No more innovation tokens</h2><p>I started out using <a href=https://en.wikipedia.org/wiki/Container_Linux>CoreOS</a> which turned out to be foolish because it was abandoned about 2 years later.</p><p>I also used to do <a href=https://github.com/subdavis/selfhosted/blob/10f6aef418ffadcb3cefca16f3fad604abfb97a2/minio.service>insane, truly unhinged shit</a> with <code>systemd</code>. I believed that <code>docker compose</code> was not a valid substitue for an init system, whatever that means. Don&rsquo;t be like me.</p><p>Unnecessary complexity is fine for learning. A particular choice may emerge out of a desire for novelty or fun or curiosity, but be clear-eyed, lest you confuse these indulgences with actual improvements. It&rsquo;s perfectly reasonable to tire of tinkering with complicated setups. Using docker compose isn&rsquo;t admitting defeat.</p><p>Keep it simple, stupid.</p></div><footer class="mt-8 pt-8 border-t border-accent-200 flex justify-between items-center"><a href=/posts class="text-accent-700 hover:text-accent-700">‚Üê Back to all posts
</a><a href=/index.xml title="Subscribe to RSS feed" class="inline-flex items-center gap-2" aria-label="RSS Feed"><svg class="inline w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M5 3a1 1 0 000 2c5.523.0 10 4.477 10 10a1 1 0 102 0C17 8.373 11.627 3 5 3z"/><path d="M4 9a1 1 0 011-1 7 7 0 017 7 1 1 0 11-2 0 5 5 0 00-5-5A1 1 0 014 9zM3 15a2 2 0 114 0 2 2 0 01-4 0z"/></svg>
<span>Subscribe with RSS</span></a></footer></article></div></div></div></body></html>